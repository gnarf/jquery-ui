<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Grid: Data</title>
	<link rel="stylesheet" href="../themes/base/jquery.ui.all.css">
	<link rel="stylesheet" href="grid.css">
	<script src="../jquery-1.4.4.js"></script>
	<script src="jquery.tmpl.js"></script>
	<script src="jquery.tmplPlus.js"></script>
	<script src="../ui/jquery.ui.core.js"></script>
	<script src="../ui/jquery.ui.widget.js"></script>
	<script src="grid.js"></script>
	<script src="jquery.datalink2.js"></script>
	
	<script>

	var localDevelopers = [
		{
			firstName: "Scott",
			lastName: "González",
			country: "USA",
			twitter: "scott_gonzalez",
			github: "scottgonzalez"
		},
		{
			firstName: "Richard",
			lastName: "Worth",
			country: "USA",
			twitter: "rworth",
			github: "rdworth"
		},
		{
			firstName: "Jörn",
			lastName: "Zaefferer",
			country: "Germany",
			twitter: "bassistance",
			github: "jzaefferer"
		}
	];

	$(function() {
		var developersGrid = $( "#developers-remote" ).grid({
			columns: [ "firstName", "lastName", "country" ],
			editable: [ true, false, false ],
			source: localDevelopers,
			selectMode: "single" // Todo add support for multiselect, using observable collection on array of selected items
		}).data( "grid" );

		var detailView = $( "#developers-detail" ).grid({
			rowTemplate: "#developers-detail-tmpl"
		}).data( "grid" );

		$.link( detailView.options, developersGrid, { to: "source", from: "selectedItem.data" });

		$( "#test" ).click( function(){
			$.setField( detailView.options, "source", {
				firstName: "Boris",
				lastName: "Moore",
				country: "USA",
				twitter: "borismoore",
				github: "BorisMoore"
			});
		});

		$( "#test2" ).click( function(){
			$( "#developers-detail" ).grid( "option", "source", {
				firstName: "Boris",
				lastName: "Moore",
				country: "USA",
				twitter: "borismoore",
				github: "BorisMoore"
			});
		});
	});
	</script>
</head>
<body>


<h2>remote data source</h2>
<p>
<table id="developers-remote">
	<thead>
		<tr>
			<th data-field="firstName">First Name</th>
			<th data-field="lastName">Last Name</th>
			<th data-field="country">Country</th>
		</tr>
	</thead>
	<tbody>
	</tbody>
</table>
</p>

<p>
<table id="developers-detail">
	<tbody>
	</tbody>
</table>
</p>

<button id="test">setFieldAPI</button>
<button id="test2">widgetAPI</button>

<script type="text/x-jquery-tmpl" id="developers-detail-tmpl">
<tr><td>
	<div>
		<label>Firstname: </label>
		<input name="firstName" value="${firstName}">
	</div>
	<div>
		<label>Lastname: </label>
		<input name="lastName" value="${lastName}">
	</div>
	<div>
		<label>GitHub username: </label>
		<input name="github" value="${github}">
	</div>
	<div>
		<label>Twitter username: </label>
		<input name="twitter" value="${twitter}">
	</div>
	<div>
		<label>Country: </label>
		<input name="country" value="${country}">
	</div>
</td></tr>
</script>	
</body>
</html>
